(()=>{"use strict";var e,t,n={503:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".button {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px 10px;\n  font-weight: 500;\n  text-transform: uppercase;\n  cursor: pointer;\n  border-radius: 5px;\n  background-color: lightslategrey;\n}\n\n.button:hover {\n  background-color: rgb(160, 102, 102);\n}\n",""]);const a=r},715:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".game--field-wrapper {\n  position: relative;\n}\n\n.game--field {\n  position: relative;\n  display: grid;\n  grid-template-columns: repeat(8, 50px);\n  grid-template-rows: repeat(8, 50px);\n  transition: all 0.5s linear;\n  border: 20px solid rgb(138, 100, 53);\n}\n\n.game--field-item {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n\n.game--field-item.current {\n  border: 3px solid black;\n}\n\n.game--field-item.check {\n  border: 3px solid blue;\n}\n\n.game--field-item.checkmate {\n  border: 3px solid red;\n}\n\n.game--field-item.movable {\n  border: 3px solid green;\n}\n\n.game--field-item img {\n  position: relative;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  transition: all 0.3s linear;\n  cursor: move;\n}\n\n.game--field-shield {\n  position: absolute;\n  z-index: 1000;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: transparent;\n}\n\n.game--label {\n  position: absolute;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.game--player-wrapper {\n  min-width: min-content;\n  text-align: center;\n}\n.game--player-wrapper.active {\n  border: 2px solid #b58860;\n  background-color: #c7aa7d;\n}\n.game--player-wrapper.winner {\n  background-color: #75d838;\n}\n\n.game--status-title {\n  display: inline-block;\n  width: 100%;\n  height: 20px;\n  font-size: 20px;\n  font-weight: 500;\n  margin-top: 5px;\n}\n\n.game--title {\n  font-size: 22px;\n  font-weight: 500;\n  margin-top: 5px;\n}\n.game--log-wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  width: 80%;\n  height: 220px;\n  margin: 5px auto 0px;\n  overflow-y: scroll;\n  background-color: white;\n  border: 2px solid black;\n  list-style: decimal;\n}\n.game--log {\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  border-bottom: 1px dashed black;\n}\n.game--log-content-wrapper {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap-reverse;\n  justify-content: space-around;\n  width: 90%;\n}\n.game--log-image {\n  height: 25px;\n}\n.game--log-text {\n  display: inline-block;\n}\n",""]);const a=r},535:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".game--main-wrapper {\n  display: grid;\n  grid-template-columns: 20% min-content 20%;\n  gap: 10px;\n  justify-content: center;\n  margin: 30px auto 0px;\n}\nbody.notScrollable {\n  overflow: hidden;\n}\n.invisible {\n  display: none !important;\n}\n.settings--aside {\n  width: 100%;\n}\n.game--settings-back {\n  position: fixed;\n  z-index: 10;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.game--settings-front-wrapper {\n  position: fixed;\n  z-index: 20;\n  top: calc(50% - (300px / 2));\n  left: calc(50% - (600px / 2));\n  width: 600px;\n  height: 300px;\n  background-color: white;\n  transition: transform 1s ease-in-out;\n  transform: scale(0.3);\n}\n\n.settings--title {\n  margin: 30px 40px 0px;\n  font-size: 26px;\n  font-weight: 500;\n  text-transform: uppercase;\n}\n\n.settings--subtitle {\n  margin: 20px 40px 0px;\n  font-size: 22px;\n  font-weight: 500;\n}\n\n.settings--select {\n  display: block;\n  width: 160px;\n  height: 28px;\n  margin: 10px 40px 0px;\n  padding-left: 5px;\n  font-size: 20px;\n}\n\n.settings--button {\n  width: 100px;\n  margin: 15px 40px 0px;\n}\n\n.player--draw-button {\n  margin-top: 5px;\n  text-transform: capitalize;\n}\n\n.endgame--wrapper {\n  text-align: center;\n}\n.endgame--button {\n  margin: 5px;\n}\n",""]);const a=r},497:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".header {\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  background-color: rgb(180, 180, 180);\n}\n\n.header-content {\n  display: flex;\n  width: 100%;\n  height: 100px;\n  align-items: center;\n}\n\n.header--logo-wrapper {\n  display: flex;\n  height: 100px;\n  align-items: center;\n  margin-left: 40px;\n}\n\n.header--title {\n  font-size: 28px;\n  font-weight: 600;\n}\n",""]);const a=r},756:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".main {\n  width: 100%;\n  max-width: 1920px;\n  margin: 0 auto;\n  padding-bottom: 40px;\n}\n\n.main--menu-wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.main--button {\n  min-height: 50px;\n  min-width: 250px;\n  margin-top: 30px;\n}\n\n.main--sign-wrapper {\n  width: 100%;\n}\n.main--sign-timer {\n  display: block;\n  width: 200px;\n  height: 100px;\n  margin: 0px auto;\n}\n\n.main--sign-title {\n  height: 30px;\n  margin: 0px auto;\n  font-size: 24px;\n  font-weight: 600;\n  text-align: center;\n}\n\n.main--replay-button {\n  position: absolute;\n  top: 0;\n  right: 50px;\n  min-height: 40px;\n  min-width: 100px;\n}\n.main--replay-info-wrapper {\n  position: relative;\n  display: grid;\n  grid-template-columns: 25% max-content 25%;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  max-width: 800px;\n  height: 200px;\n  margin: 20px auto 0px;\n  background-color: #9e988d;\n}\n.main--button-wrapper {\n  position: relative;\n  text-align: center;\n}\n.main--replay-name {\n  margin-top: 10px;\n}\n.main--replay-title {\n  margin-top: 15px;\n  font-size: 24px;\n  font-weight: 600;\n  text-align: center;\n}\n.main--info-button {\n  position: inherit;\n  top: 0;\n  right: 0;\n  margin-top: 15px;\n}\n",""]);const a=r},214:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,"html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo,\ninput,\ntextarea {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n}\ninput,\ntextarea {\n  box-sizing: border-box;\n}\ni {\n  font-style: italic;\n}\na {\n  text-decoration: none;\n  color: inherit;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nbody {\n  line-height: 1;\n  background: none;\n}\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n",""]);const a=r},96:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".replay--wrapper {\n  display: flex;\n  width: 100%;\n  align-items: flex-start;\n  justify-content: center;\n}\n\n.replay--player-field-wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  min-width: 440px;\n  margin: 20px;\n  background-color: rgb(180, 180, 180);\n}\n\n.replay--player-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  gap: 20px;\n  padding: 5px 0px;\n}\n\n.replay--player-wrapper.winner {\n  background-color: #75d838;\n}\n\n.replay--log-wrapper {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 80%;\n  height: 440px;\n  margin: 5px auto 0px;\n  overflow-y: scroll;\n  background-color: white;\n  border: 2px solid black;\n  list-style-type: none;\n}\n\n.replay--panel-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n}\n\n.main--replay-log-title {\n  margin-top: 42px;\n  height: 50px;\n}\n.replay--log-li {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 5px;\n  cursor: pointer;\n}\n.replay--log-li.active {\n  background-color: #b58860;\n}\n\n.replay--log-image {\n  width: 25px;\n}\n\n.replay--panel-wrapper {\n  display: flex;\n  width: 80%;\n  justify-content: space-around;\n  padding: 15px 0px;\n}\n.replay--control-button {\n  padding: 5px 20px;\n  font-size: 26px;\n}\n",""]);const a=r},180:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".registration--wrapper {\n  display: grid;\n  grid-template-columns: 35% 15% 35%;\n  gap: 10px;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  max-width: 1920px;\n  margin: 40px auto 0px;\n}\n.registration--player-wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.registration--avatar-wrapper {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n  border: 1px solid black;\n  border-radius: 50%;\n}\n.registration--avatar-input {\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.registration--name-input {\n  max-width: 180px;\n  margin-top: 5px;\n  text-align: center;\n  border: 1px solid black;\n  cursor: pointer;\n}\n.registration--submenu-wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.registration--submenu-button {\n  min-height: 40px;\n  min-width: 150px;\n  margin-top: 20px;\n}\n",""]);const a=r},890:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(645),r=n.n(i),a=n(214),s=n(497),o=n(756),l=n(503),c=n(180),h=n(535),d=n(715),p=n(96),u=r()((function(e){return e[1]}));u.i(a.Z),u.i(s.Z),u.i(o.Z),u.i(l.Z),u.i(c.Z),u.i(h.Z),u.i(d.Z),u.i(p.Z),u.push([e.id,"html {\n  font-family: Georgia, 'Times New Roman', Times, serif;\n  font-size: 20px;\n  font-weight: 400;\n}\n\n.content {\n  max-width: 1920px;\n}\n",""]);const m=u},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(r[s]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},915:(e,t,n)=>{var i=n(379),r=n.n(i),a=n(890),s=r()(a.default,{insert:"head",singleton:!1});if(!a.default.locals||e.hot.invalidate){var o=a.default.locals;e.hot.accept(890,(t=>{a=n(890),function(e,t,n){if(!e&&t||e&&!t)return!1;var i;for(i in e)if(e[i]!==t[i])return!1;for(i in t)if(!e[i])return!1;return!0}(o,a.default.locals)?(o=a.default.locals,s(a.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),a.default.locals},379:(e,t,n)=>{var i,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},i=[],r=0;r<e.length;r++){var o=e[r],l=t.base?o[0]+t.base:o[0],c=n[l]||0,h="".concat(l," ").concat(c);n[l]=c+1;var d=s(h),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:h,updater:f(p,t),references:1}),i.push(h)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var a=n.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var a=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function p(e,t,n){var i=n.css,r=n.media,a=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var u=null,m=0;function f(e,t){var n,i,r;if(t.singleton){var a=m++;n=u||(u=l(t)),i=d.bind(null,n,a,!1),r=d.bind(null,n,a,!0)}else n=l(t),i=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=s(n[i]);a[r].references--}for(var l=o(e,t),c=0;c<n.length;c++){var h=s(n[c]);0===a[h].references&&(a[h].updater(),a.splice(h,1))}n=l}}}},397:(e,t,n)=>{const i="replays",r="PvPOnline",a="PvPOffline",s="PvE",o=["A","B","C","D","E","F","G","H"],l="grabbing",c="easy",h="normal";class d{static createElement(e,t,n=""){const i=document.createElement(e);return t&&t.forEach((e=>i.classList.add(e))),i.textContent=n,i}static createImage(e,t){const n=document.createElement("img");return n.src=e,t&&t.forEach((e=>n.classList.add(e))),n}static createInput(e="text",t,n){const i=document.createElement("input");return i.setAttribute("type",`${e}`),t&&t.forEach((e=>i.classList.add(e))),n&&i.setAttribute("title",`${n}`),i}static createSelect(e,t){const n=document.createElement("select");return e&&e.forEach((e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.textContent,e.disabled&&t.setAttribute("disabled","disabled"),e.selected&&t.setAttribute("selected","selected"),n.append(t)})),t&&t.forEach((e=>n.classList.add(e))),n}}class p{constructor(e,t){this.color=e,this.position=t}render(){const e=d.createImage(`${this.imageUrl}`);return e.ondragstart=()=>!1,e.dataset.type=String(this.constructor.name),e.dataset.color=this.color,e.dataset.position=this.position,e}canBeat(){return[[this.position]]}canMove(){return[[this.position]]}}class u extends p{constructor(e,t){super(e,t),this.name="bishop",this.imageUrl=`./img/chess-figures/${e}-${this.name}.png`,this.cost=30}canBeat(){return this.moveAndBeat()}canMove(){return this.moveAndBeat()}moveAndBeat(){const e=[],t=this.position.slice(0,1),n=this.position.slice(1),i=[],r=[],a=[],s=[];let[l,c]=[Number(o.indexOf(t))+1,Number(n)+1];for(;l<o.length&&c<=o.length;)a.push(`${o[l]}${c}`),l+=1,c+=1;for([l,c]=[Number(o.indexOf(t))+1,Number(n)-1];l<o.length&&c>=1;)i.push(`${o[l]}${c}`),l+=1,c-=1;for([l,c]=[Number(o.indexOf(t))-1,Number(n)-1];l>=0&&c>=1;)r.push(`${o[l]}${c}`),l-=1,c-=1;for([l,c]=[Number(o.indexOf(t))-1,Number(n)+1];l>=0&&c<=o.length;)s.push(`${o[l]}${c}`),l-=1,c+=1;return e.push(i,r,a,s),e}}class m extends p{constructor(e,t){super(e,t),this.name="king",this.imageUrl=`./img/chess-figures/${e}-${this.name}.png`,this.cost=900,this.moved=!1}canBeat(){return this.moveAndBeat()}canMove(){return this.moveAndBeat()}moveAndBeat(){const e=[],t=this.position.slice(0,1),n=this.position.slice(1),i=[],r=[],a=[],s=[],l=[],c=[],h=[],d=[];Number(n)+1<=o.length&&i.push(`${t}${Number(n)+1}`),Number(n)-1>=1&&r.push(`${t}${Number(n)-1}`),o.indexOf(t)+1<o.length&&s.push(`${o[o.indexOf(t)+1]}${n}`),o.indexOf(t)-1>=0&&a.push(`${o[o.indexOf(t)-1]}${n}`);let[p,u]=[Number(o.indexOf(t))+1,Number(n)+1];return p<o.length&&u<=o.length&&h.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))+1,Number(n)-1],p<o.length&&u>=1&&l.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))-1,Number(n)-1],p>=0&&u>=1&&c.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))-1,Number(n)+1],p>=0&&u<=o.length&&d.push(`${o[p]}${u}`),e.push(l,c,h,d),e.push(i,r,a,s),e}}class f extends p{constructor(e,t){super(e,t),this.name="knight",this.imageUrl=`./img/chess-figures/${e}-${this.name}.png`,this.cost=30}canBeat(){return this.moveAndBeat()}canMove(){return this.moveAndBeat()}moveAndBeat(){const e=[],t=this.position.slice(0,1),n=this.position.slice(1),i=[],r=[],a=[],s=[],l=[],c=[],h=[],d=[];let[p,u]=[Number(o.indexOf(t))+1,Number(n)+2];return p<o.length&&u<=o.length&&i.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))+2,Number(n)+1],p<o.length&&u<=o.length&&r.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))+1,Number(n)-2],p<o.length&&u>=1&&a.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))+2,Number(n)-1],p<o.length&&u>=1&&s.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))-1,Number(n)-2],p>=0&&u>=1&&c.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))-2,Number(n)-1],p>=0&&u>=1&&l.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))-1,Number(n)+2],p>=0&&u<=o.length&&h.push(`${o[p]}${u}`),[p,u]=[Number(o.indexOf(t))-2,Number(n)+1],p>=0&&u<=o.length&&d.push(`${o[p]}${u}`),e.push(i,r,s,a,l,c,h,d),e}}class g extends p{constructor(e,t){super(e,t),this.name="pawn",this.imageUrl=`./img/chess-figures/${e}-${this.name}.png`,this.cost=10}canBeat(){const e=[],t=this.position.slice(0,1),n=this.position.slice(1),i=[],r=[];if("black"===this.color&&"1"!==n){if(t!==o[0]){const e=Number(o.indexOf(t));i.push(`${o[e-1]}${Number(n)-1}`)}if(t!==o[o.length-1]){const e=Number(o.indexOf(t));r.push(`${o[e+1]}${Number(n)-1}`)}}if("white"===this.color&&n!==String(o.length)){if(t!==o[0]){const e=Number(o.indexOf(t));i.push(`${o[e-1]}${Number(n)+1}`)}if(t!==o[o.length-1]){const e=Number(o.indexOf(t));r.push(`${o[e+1]}${Number(n)+1}`)}}return e.push(i,r),e}canMove(){const e=[],t=this.position.slice(0,1),n=this.position.slice(1),i=[];if("black"===this.color)switch(n){case"1":break;case"7":i.push(`${t}${Number(n)-1}`),i.push(`${t}${Number(n)-2}`);break;default:i.push(`${t}${Number(n)-1}`)}if("white"===this.color)switch(n){case String(o.length):break;case"2":i.push(`${t}${Number(n)+1}`),i.push(`${t}${Number(n)+2}`);break;default:i.push(`${t}${Number(n)+1}`)}return e.push(i),e}isLastRow(){const e="black"===this.color?"1":String(o.length);return this.position.slice(1)===e}}class b extends p{constructor(e,t){super(e,t),this.name="queen",this.imageUrl=`./img/chess-figures/${e}-${this.name}.png`,this.cost=90}canBeat(){return this.moveAndBeat()}canMove(){return this.moveAndBeat()}moveAndBeat(){const e=[],t=this.position.slice(0,1),n=this.position.slice(1),i=[],r=[],a=[],s=[],l=[],c=[],h=[],d=[];for(let e=Number(n)+1;e<=o.length;e+=1)i.push(`${t}${e}`);for(let e=Number(n)-1;e>=1;e-=1)r.push(`${t}${e}`);for(let e=o.indexOf(t)+1;e<o.length;e+=1)s.push(`${o[e]}${n}`);for(let e=o.indexOf(t)-1;e>=0;e-=1)a.push(`${o[e]}${n}`);let[p,u]=[Number(o.indexOf(t))+1,Number(n)+1];for(;p<o.length&&u<=o.length;)h.push(`${o[p]}${u}`),p+=1,u+=1;for([p,u]=[Number(o.indexOf(t))+1,Number(n)-1];p<o.length&&u>=1;)l.push(`${o[p]}${u}`),p+=1,u-=1;for([p,u]=[Number(o.indexOf(t))-1,Number(n)-1];p>=0&&u>=1;)c.push(`${o[p]}${u}`),p-=1,u-=1;for([p,u]=[Number(o.indexOf(t))-1,Number(n)+1];p>=0&&u<=o.length;)d.push(`${o[p]}${u}`),p-=1,u+=1;return e.push(l,c,h,d),e.push(i,r,a,s),e}}class y extends p{constructor(e,t){super(e,t),this.name="rook",this.imageUrl=`./img/chess-figures/${e}-${this.name}.png`,this.cost=50,this.moved=!1}canBeat(){return this.moveAndBeat()}canMove(){return this.moveAndBeat()}moveAndBeat(){const e=[],t=this.position.slice(0,1),n=this.position.slice(1),i=[],r=[],a=[],s=[];for(let e=Number(n)+1;e<=o.length;e+=1)i.push(`${t}${e}`);for(let e=Number(n)-1;e>=1;e-=1)r.push(`${t}${e}`);for(let e=o.indexOf(t)+1;e<o.length;e+=1)s.push(`${o[e]}${n}`);for(let e=o.indexOf(t)-1;e>=0;e-=1)a.push(`${o[e]}${n}`);return e.push(i,r,a,s),e}}const v={Bishop:u,King:m,Knight:f,Pawn:g,Queen:b,Rook:y};function w(e){return[o.indexOf(e.slice(0,1)),o.length-Number(e.slice(1))]}class x{constructor(e){if(e)return this.field=e,this;this.field=[];for(let e=0;e<o.length;e+=1){const e=new Array(o.length).fill(null);this.field.push(e)}return this}checkFigureMovablePositions(e,t,n){e.forEach(((e,t,n)=>{let i=!0;n[t]=e.filter((e=>{const t=o.indexOf(e.slice(0,1)),n=o.length-Number(e.slice(1));return this.field[n][t]&&(i=!1),i}))})),t.forEach(((e,t,i)=>{let r=!0;i[t]=e.filter((e=>!(!r||!this.getItem(e))&&(r=!1,this.getItem(e).color!==n)))}));const i=[];return e.forEach((e=>{i.push(...e)})),t.forEach((e=>{i.push(...e)})),i}createInitialFieldPosition(){for(let e=0;e<o.length;e+=1)this.field[1][e]=new g("black",`${o[e]}${this.field.length-1}`),this.field[this.field.length-2][e]=new g("white",`${o[e]}2`);const e=[y,f,u];for(let t=0;t<e.length;t+=1)this.field[0][t]=new e[t]("black",`${o[t]}${this.field.length}`),this.field[0][this.field.length-t-1]=new e[t]("black",`${o[o.length-t-1]}${this.field.length}`),this.field[this.field.length-1][t]=new e[t]("white",`${o[t]}1`),this.field[this.field.length-1][this.field.length-t-1]=new e[t]("white",`${o[o.length-t-1]}1`);this.field[0][3]=new b("black",`${o[3]}${this.field.length}`),this.field[this.field.length-1][3]=new b("white",`${o[3]}1`),this.field[0][4]=new m("black",`${o[4]}${this.field.length}`),this.field[this.field.length-1][4]=new m("white",`${o[4]}1`)}getAllMovablePositions(e){const t=this.getSelectedFigures(e),n=[];return t.forEach((t=>{const i=t.canMove(),r=t.canBeat();this.checkFigureMovablePositions(i,r,e).forEach((i=>{const r=x.getCopy(this.field),a=new x(r),s=a.getItem(t.position);a.moveFigureInField(s,i),x.verifyCheck(r,e,!1).length||n.push(i)}))})),n}static getCopy(e){const t=[];return e.forEach((e=>{const n=[];e.forEach((e=>{if(e){const{name:t,color:i,position:r}=e;n.push(function(e,t,n){const i=e.slice(0,1).toUpperCase()+e.slice(1);return new(0,v[i])(t,n)}(t,i,r))}else n.push(e)})),t.push(n)})),t}getItem(e){const[t,n]=w(e);return this.field[n][t]}getSelectedFigures(e){const t=[];return this.field.forEach((n=>{const i=n.filter((t=>!!t&&t.color===e));t.push(...i)})),t}moveFigureInField(e,t){const[n,i]=w(t),[r,a]=w(e.position);return this.field[i][n]=e,(n!==r||i!==a)&&(this.field[a][r]=null,!0)}static verifyCheck(e,t,n){const i=n?t:"black"===t?"white":"black",r=new x(e),a=r.getSelectedFigures(i),s=[];return a.forEach((e=>{const i=e.canBeat();i.forEach(((e,i,a)=>{let s=!0;const o=a;o[i]=e.filter((e=>{if(s){const i=r.getItem(e);if(i){s=!1;const e=n?i.color!==t:i.color===t;return i instanceof m&&e}}return s}));const l=o[i][o[i].length-1];l&&r.getItem(l)instanceof m||(o[i]=[])})),s.push(...i.filter((e=>e.length)))})),s}}class k{constructor(e){this.avatarUrl="./icons/standard-avatar.png",this.name=e}static createAvatarUrl(e){const t=e.files[0],n=new FileReader;n.readAsDataURL(t);const i=new Promise((e=>{n.onload=()=>e(String(n.result))}));return e.value="",i}renderPlayerInfo(){const e=d.createElement("figure",["game--player-wrapper"]),t=d.createElement("div",["registration--avatar-wrapper"]);t.style.setProperty("background-image",`url(${this.avatarUrl})`);const n=d.createElement("figcaption",[],`${this.name}`);this.statusTitle=d.createElement("h4",["game--status-title"],"");const i=d.createElement("h4",["game--title"],"Log:");this.logWrapper=d.createElement("ol",["game--log-wrapper"]),e.append(t,n,this.statusTitle,i,this.logWrapper);const r=d.createElement("div");return this.drawButton=d.createElement("button",["player--draw-button","button"],"Draw offer"),this.surrenderButton=d.createElement("button",["player--draw-button","button"],"Surrender"),r.append(this.drawButton,this.surrenderButton),e.append(r),this.drawButton.setAttribute("disabled","disabled"),this.surrenderButton.setAttribute("disabled","disabled"),e}updateStatusTitle(){this.statusTitle.textContent=this.status}}var P=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};class E extends k{constructor(){super("Chess AI"),this.avatarUrl="./icons/bot-avatar.png"}getBestMove(e,t,n){return P(this,void 0,void 0,(function*(){const i=n?-1:1,r=this.getMoves(e,n);if(!r.length)return["","",1/0*-i];let a=[];if(r.forEach((t=>{t.end.forEach((n=>{const r=new x(e).getItem(n),s=r?i*r.cost:0;a.push({value:s,start:t.start,end:n})}))})),0!==t){a.sort(((e,t)=>i*(e.value-t.value)));const e=a[a.length-1]?a[a.length-1].value:-1/0;a=a.filter((t=>t.value===e))}t<=this.maxDepth&&a.forEach((i=>P(this,void 0,void 0,(function*(){const r=x.getCopy(e),a=new x(r),s=a.getItem(i.start);a.moveFigureInField(s,i.end),s.position=i.end,i.value+=Number((yield this.getBestMove(a.field,t+1,!n))[2])})))),a.sort(((e,t)=>i*(e.value-t.value)));const s=a[a.length-1]?a[a.length-1].value:-1/0;a=a.filter((e=>e.value===s));const o=a[Math.floor(Math.random()*a.length)];return[o.start,o.end,s]}))}getMoves(e,t){const n=new x(e),i="white"===this.chessmanColor?"black":"white",r=t?i:this.chessmanColor,a=n.getSelectedFigures(r),s=[];return a.forEach((e=>{const t=e.canMove(),i=e.canBeat(),a=n.checkFigureMovablePositions(t,i,r),o=[];if(a.forEach((t=>{const i=x.getCopy(n.field),a=new x(i),s=a.getItem(e.position);a.moveFigureInField(s,t),x.verifyCheck(i,r,!1).length||o.push(t)})),o.length){const t={start:e.position,end:o};s.push(t)}})),s}}class ${static playerVisualization(e,t=!0){const n=d.createElement("div",["registration--player-wrapper"]),i=d.createElement("div",["registration--avatar-wrapper"]);i.style.setProperty("background-image",`url(${e.avatarUrl})`);const r=d.createInput("file",["registration--avatar-input"],"Load picture");i.append(r),r.addEventListener("input",(()=>{return t=this,n=void 0,s=function*(){const t=yield k.createAvatarUrl(r);i.style.setProperty("background-image",`url(${t})`),e.avatarUrl=t},new((a=void 0)||(a=Promise))((function(e,i){function r(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(r,o)}l((s=s.apply(t,n||[])).next())}));var t,n,a,s}));const a=d.createInput("text",["registration--name-input"],"Set player name");return a.value=e.name,a.setAttribute("readonly","readonly"),a.setAttribute("maxlength","15"),function(e){e.addEventListener("click",(()=>{e.removeAttribute("readonly"),e.style.setProperty("background-color","#d2d250")})),e.addEventListener("blur",(()=>{e.setAttribute("readonly","readonly"),e.style.removeProperty("background-color")}))}(a),a.addEventListener("input",(()=>{e.name=a.value})),[a,r].forEach((e=>{t||(e.setAttribute("disabled","disabled"),e.removeAttribute("title"))})),n.append(i,a),n}}class F{constructor(e,t,n,i){this.x=t,this.y=n,this.value=i,this.context=e,this.stopped=!1}tick(){const e=this.stopped?0:1;this.value+=e,this.render()}render(){const[e]=[this.context];e.font="bold 50px serif",e.fillStyle="#000",e.fillText(this.getCurrentTime(),this.x,this.y)}getCurrentTime(){const e=new Date(1e3*this.value);return`${e.getUTCHours()<10?"0":""}${e.getUTCHours()}:${e.getUTCMinutes()<10?"0":""}${e.getUTCMinutes()}:${e.getSeconds()<10?"0":""}${e.getUTCSeconds()}`}}const C="#f0b9d2";class L{constructor(){this.wrapper=d.createElement("div",["game--field-wrapper"]),this.field=d.createElement("div",["game--field"]),this.wrapper.append(this.field);let e=C;for(let t=0;t<o.length;t+=1)for(let n=0;n<o.length;n+=1){const i=d.createElement("div",["game--field-item"]);e=0===n?e:e===C?"#b58860":C,i.style.setProperty("background-color",`${e}`),i.setAttribute("data-position",`${o[n]}${o.length-t}`),this.field.append(i)}this.shield=d.createElement("div",["game--field-shield"]),this.shield.hidden=!0,this.wrapper.append(this.shield)}clearAllSquares(){this.field.childNodes.forEach((e=>{e.textContent=""}))}clearCheckSquares(){const e=this.field.querySelectorAll(".check");e&&e.forEach((e=>e.classList.remove("check")))}clearMovableSquares(){const e=this.field.querySelector(".current");e&&e.classList.remove("current");const t=this.field.querySelectorAll(".movable");t&&t.forEach((e=>e.classList.remove("movable")));const n=this.field.querySelectorAll(".castling");t&&n.forEach((e=>e.classList.remove("castling")))}createFieldLabels(){this.labelNumbers=[];for(let e=0;e<o.length;e+=1){const t=d.createElement("label",["game--label"],""+(o.length-e));t.style.setProperty("left","5px"),this.labelNumbers.push(t)}this.labelLetters=[];for(let e=0;e<o.length;e+=1){const t=d.createElement("label",["game--label"],`${o[e]}`);t.style.setProperty("bottom","0px"),this.labelLetters.push(t)}}displayCheckPositions(e){e.forEach((e=>{e.forEach((e=>{this.field.querySelector(`[data-position=${e}]`).classList.add("check")}))}))}displayCheckmatePositions(){const e=this.field.querySelectorAll(".check");null==e||e.forEach((e=>{e.classList.add("checkmate"),e.classList.remove("check")}))}displayCurrentPosition(e){const t=this.field.querySelector(`[data-position=${e.dataset.position}]`);this.clearMovableSquares(),t.classList.add("current")}dropImage(e){window.onmouseup=t=>{const n=e;n.hidden=!0;const i=document.elementFromPoint(t.clientX,t.clientY);if(n.hidden=!1,!(i instanceof HTMLElement))return!1;const r=this.field.querySelector(`[data-position=${i.dataset.position}]`);return n.style.left="0px",n.style.top="0px",r&&r.classList.contains("movable")&&r.click(),n.style.cursor="move",n.style.zIndex="1",document.onmousemove=()=>{},!0}}moveImage(e,t,n){const i=e;document.onmousemove=e=>{i.style.zIndex="100";const r=n?-1:1;i.style.left=r*(e.clientX-t[0])+"px",i.style.top=r*(e.clientY-t[1])+"px",i.hidden=!0;const a=document.elementFromPoint(e.clientX,e.clientY);if(i.hidden=!1,!(a instanceof HTMLElement))return!1;const s=this.field.querySelector(`[data-position=${a.dataset.position}]`);return i.style.cursor=`${(null==s?void 0:s.classList.contains("movable"))?l:"no-drop"}`,!0}}removeFieldLabels(){this.labelLetters.forEach((e=>e.remove())),this.labelNumbers.forEach((e=>e.remove()))}renderCurrentFieldPosition(e){const t=[];this.clearAllSquares();for(let n=0;n<e.length;n+=1)for(let i=0;i<e.length;i+=1)if(e[n][i]){const r=this.field.querySelector(`[data-position=${e[n][i].position}]`),a=e[n][i].render();t.push(a),r.append(a)}return t}renderFieldLabels(e){for(let t=0;t<this.labelNumbers.length;t+=1){const n=e?this.labelNumbers[t]:this.labelNumbers[this.labelNumbers.length-t-1];n.style.setProperty("top",50*(t+.5)+10+"px"),this.wrapper.append(n)}for(let t=0;t<this.labelLetters.length;t+=1){const n=e?this.labelLetters[t]:this.labelLetters[this.labelLetters.length-t-1];n.style.setProperty("left",50*(t+.5)+10+"px"),this.wrapper.append(n)}}revertFieldImage(){this.removeFieldLabels(),this.field.style.setProperty("transform",`rotate(${"rotate(180deg)"===this.field.style.transform?0:180}deg)`),this.field.childNodes.forEach((e=>{if(e.childElementCount){const t=e.children[0];t instanceof HTMLElement&&(t.remove(),t.style.setProperty("transform",this.field.style.transform),e.append(t))}}))}}const B=[{firstPlayer:{name:"Anatoly Karpov",chessmanColor:"white",status:"Surrender",avatarUrl:"./icons/standard-avatar.png"},secondPlayer:{name:"Garry Kasparov",chessmanColor:"black",status:"Win",avatarUrl:"./icons/standard-avatar.png"},totalTime:"unknown",log:["white-pawn: E2-E4","black-pawn: C7-C5","white-knight: G1-F3","black-pawn: E7-E6","white-pawn: D2-D4","black-pawn: C5-D4","white-knight: F3-D4","black-knight: B8-C6","white-knight: D4-B5","black-pawn: D7-D6","white-pawn: C2-C4","black-knight: G8-F6","white-knight: B1-C3","black-pawn: A7-A6","white-knight: B5-A3","black-pawn: D6-D5","white-pawn: C4-D5","black-pawn: E6-D5","white-pawn: E4-D5","black-knight: C6-B4","white-bishop: F1-E2","black-bishop: F8-C5","white-king: E1-G1+white-rook: H1-F1","black-king: E8-G8+black-rook: H8-F8","white-bishop: E2-F3","black-bishop: C8-F5","white-bishop: C1-G5","black-rook: F8-E8","white-queen: D1-D2","black-pawn: B7-B5","white-rook: A1-D1","black-knight: B4-D3","white-knight: A3-B1","black-pawn: H7-H6","white-bishop: G5-H4","black-pawn: B5-B4","white-knight: C3-A4","black-bishop: C5-D6","white-bishop: H4-G3","black-rook: A8-C8","white-pawn: B2-B3","black-pawn: G7-G5","white-bishop: G3-D6","black-queen: D8-D6","white-pawn: G2-G3","black-knight: F6-D7","white-bishop: F3-G2","black-queen: D6-F6","white-pawn: A2-A3","black-pawn: A6-A5","white-pawn: A3-B4","black-pawn: A5-B4","white-queen: D2-A2","black-bishop: F5-G6","white-pawn: D5-D6","black-pawn: G5-G4","white-queen: A2-D2","black-king: G8-G7","white-pawn: F2-F3","black-queen: F6-D6","white-pawn: F3-G4","black-queen: D6-D4","white-king: G1-H1","black-knight: D7-F6","white-rook: F1-F4","black-knight: F6-E4","white-queen: D2-D3","black-knight: E4-F2","white-rook: F4-F2","black-bishop: G6-D3","white-rook: F2-D2","black-queen: D4-E3","white-rook: D2-D3","black-rook: C8-C1","white-knight: A4-B2","black-queen: E3-F2","white-knight: B1-D2","black-rook: C1-D1","white-knight: B2-D1","black-rook: E8-E1"],title:"Anatoly Karpov surrendered!\n      Garry Kasparov wins the game."}];var I=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};class D{constructor(){if(D.instance)return D.instance;D.instance=this}add(e){return I(this,void 0,void 0,(function*(){const t=(yield this.openRequestToDB()).transaction([i],"readwrite").objectStore(i).put(e);this.requestErrorListener(t)}))}createDB(){return I(this,void 0,void 0,(function*(){if(!("indexedDB"in window)||/iPad|iPhone|iPod/.test(navigator.platform))throw new Error("Error: Your device doesn't support IndexedBD");const e=yield this.openRequestToDB();e.objectStoreNames.contains("replays")||(e.createObjectStore("replays",{keyPath:"id",autoIncrement:!0}),this.createDefaultDB())}))}getReplaysDB(){return I(this,void 0,void 0,(function*(){const e=yield this.openRequestToDB();return new Promise((t=>{const n=[],r=e.transaction([i],"readonly"),a=r.objectStore(i).openCursor();a.onsuccess=function(){const e=a.result;e&&(n.push(e.value),e.continue())},r.oncomplete=()=>{this.status="success",t(n)}}))}))}createDefaultDB(){return I(this,void 0,void 0,(function*(){B.forEach((e=>I(this,void 0,void 0,(function*(){return this.add(e)}))))}))}openRequestToDB(){return new Promise(((e,t)=>{const n=indexedDB.open("Chess-KorvinAtreides");let i;this.status="pending",n.onupgradeneeded=()=>{i=n.result,e(i)},n.onsuccess=()=>{i=n.result,e(i)},n.onerror=e=>{this.status="error",t(new Error(`'Error: ${e}`))}}))}requestErrorListener(e){e.addEventListener("error",(()=>{throw this.status="error",new Error(`'Error: ${e.error.name}`)})),e.addEventListener("success",(()=>{this.status="success"}))}}const S=[{disabled:!1,selected:!0,value:c,textContent:"Easy"},{disabled:!1,selected:!1,value:h,textContent:"Normal"}],A=[{disabled:!1,selected:!0,value:"white",textContent:"White Set"},{disabled:!1,selected:!1,value:"black",textContent:"Black Set"},{disabled:!1,selected:!1,value:"random",textContent:"Random Set"}];class M{acceptSettings(e,t){if(this.secondPlayer instanceof E)switch(this.secondPlayer.difficulty=e.value,this.secondPlayer.difficulty){case c:this.secondPlayer.maxDepth=1;break;case h:this.secondPlayer.maxDepth=2;break;case"hard":this.secondPlayer.maxDepth=4}switch(t.value){case"white":this.currentPlayer=this.firstPlayer;break;case"black":this.currentPlayer=this.secondPlayer;break;default:this.currentPlayer=Math.random()<.5?this.firstPlayer:this.secondPlayer}this.currentPlayer.chessmanColor="white",this.currentPlayer===this.firstPlayer?this.secondPlayer.chessmanColor="black":this.firstPlayer.chessmanColor="black",this.currentPlayer.playerLogWrapper.classList.add("active"),this.removeGameSettings(),this.currentPlayer instanceof E&&(this.htmlField.revertFieldImage(),setTimeout((()=>{this.htmlField.renderFieldLabels("white"===this.firstPlayer.chessmanColor),this.botTurn()}),2e3)),this.setTimer(this.timerCanvas)}botTurn(){document.documentElement.style.cursor="wait",this.currentPlayer.drawButton.setAttribute("disabled","disabled"),this.currentPlayer.surrenderButton.setAttribute("disabled","disabled"),this.htmlField.shield.hidden=!1,setTimeout((()=>{return e=this,t=void 0,i=function*(){if(this.currentPlayer instanceof E){const[e,t]=yield this.currentPlayer.getBestMove(this.logicField.field,0,!1),n=this.htmlField.field.querySelector(`[data-position=${e}]`),i=this.htmlField.field.querySelector(`[data-position=${t}]`),r=n.firstElementChild;setTimeout((()=>{r instanceof HTMLElement&&r.onmousedown(null),i.click(),this.htmlField.shield.hidden=!0,document.documentElement.style.cursor="default"}),0)}},new((n=void 0)||(n=Promise))((function(r,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i}),0)}castling(e){const t=this.currentFigure.position.slice(0,1),n=this.currentFigure.position.slice(1),i=e.slice(0,1)<t,r=o[i?o.length-1:0],a=this.logicField.getItem(`${r}${n}`),s=o.indexOf(t)+(i?-1:1);this.logicField.moveFigureInField(a,`${o[s]}${n}`);const l=this.htmlField.field.querySelector(`[data-position=${o[i?o.length-1:0]}${n}]`).children[0];return this.htmlField.field.querySelector(`[data-position=${o[s]}${n}]`).append(l),l instanceof HTMLElement&&(l.dataset.position=`${o[s]}${n}`,a.position=`${o[s]}${n}`,this.writeLog(`${r}${n}`,a.position,a),!0)}changePlayer(){this.currentPlayer.playerLogWrapper.classList.add("active"),this.currentPlayer.drawButton.removeAttribute("disabled"),this.currentPlayer.surrenderButton.removeAttribute("disabled"),this.mod===a&&(this.htmlField.revertFieldImage(),setTimeout((()=>{this.htmlField.renderFieldLabels("white"===this.currentPlayer.chessmanColor)}),1e3)),this.currentPlayer instanceof E&&this.botTurn()}clickField(){this.htmlField.field.onclick=e=>{if(!(e.target instanceof HTMLElement&&this.currentFigure))return!1;const[t]=[e.target.dataset.position],n=this.htmlField.field.querySelector(`[data-position=${t}]`);if(!n||!n.classList.contains("movable"))return!1;this.writeLog(this.currentFigure.position,t,this.currentFigure),this.gameTitle.textContent="";const i=this.htmlField.field.querySelector(`[data-position=${this.currentFigure.position}]`).children[0],r=this.currentFigure.position;if(!(i instanceof HTMLElement))return!1;if(n.textContent="",n.append(i),this.logicField.moveFigureInField(this.currentFigure,t),i.dataset.position=t,this.currentFigure.position=t,this.currentFigure instanceof g&&this.currentFigure.isLastRow()){this.pawnPromotion(n,i),this.gameTitle.textContent="Important event: Promotion!",this.writeLog(this.currentFigure.position,t,this.currentFigure);const e=this.log.pop();this.log[this.log.length-1]+=`+${e}`}if((this.currentFigure instanceof m||this.currentFigure instanceof y)&&(this.currentFigure.moved=!0),this.currentFigure instanceof m&&n.classList.contains("castling")){this.castling(r),this.gameTitle.textContent="Important event: Castling!";const e=this.log.pop();this.log[this.log.length-1]+=`+${e}`}this.htmlField.clearMovableSquares(),this.htmlField.clearCheckSquares();const a=x.verifyCheck(this.logicField.field,this.currentPlayer.chessmanColor,!0);return this.check=!!a.length,a.length&&(this.htmlField.displayCheckPositions(a),this.gameTitle.textContent="Important event: Check!"),this.endTurn(),!0}}createGameSettings(){this.settingsWrapper=d.createElement("aside",["settings--aside","invisible"]);const e=d.createElement("div",["game--settings-back"]);this.settingsFront=d.createElement("div",["game--settings-front-wrapper"]),this.settingsWrapper.append(e,this.settingsFront);const t=d.createElement("h3",["settings--title"],"Game settings:"),n=d.createElement("h4",["settings--subtitle"],`Set ${this.firstPlayer.name} Color:`),i=d.createSelect(A,["settings--select"]);let r;if(this.settingsFront.append(t,n,i),this.secondPlayer instanceof E){const e=d.createElement("h4",["settings--subtitle"],"Chess Bot Difficulty:");r=d.createSelect(S,["settings--select"]),this.settingsFront.append(e,r)}const a=d.createElement("button",["settings--button","button"],"Accept");this.settingsFront.append(a),a.onclick=()=>{this.acceptSettings(r,i)}}drawByAgreement(){[this.firstPlayer,this.secondPlayer].forEach((e=>{e.drawButton.addEventListener("click",(()=>{e.status="Draw"===e.status?"":"Draw",e.updateStatusTitle();const t=e===this.firstPlayer?this.secondPlayer:this.firstPlayer;"Draw"===e.status&&"Draw"===t.status&&(this.gameTitle.textContent="Important event: Draw by agreement",this.endGame())}))}))}endGame(){this.timer.stopped=!0,this.htmlField.shield.hidden=!1,this.mainWrapper.before(this.endGameButtons),this.currentPlayer.drawButton.setAttribute("disabled","disabled"),this.currentPlayer.surrenderButton.setAttribute("disabled","disabled");const e={name:this.firstPlayer.name,chessmanColor:this.firstPlayer.chessmanColor,status:this.firstPlayer.status,avatarUrl:this.firstPlayer.avatarUrl},t={name:this.secondPlayer.name,chessmanColor:this.secondPlayer.chessmanColor,status:this.secondPlayer.status,avatarUrl:this.secondPlayer.avatarUrl};this.replayRecord={log:this.log,firstPlayer:e,secondPlayer:t,totalTime:this.timer.getCurrentTime(),title:this.gameTitle.textContent},(new D).add(this.replayRecord)}endTurn(){this.currentPlayer.playerLogWrapper.classList.remove("active"),this.currentPlayer.drawButton.setAttribute("disabled","disabled"),this.currentPlayer.surrenderButton.setAttribute("disabled","disabled");const e=this.currentPlayer===this.firstPlayer;this.currentPlayer=e?this.secondPlayer:this.firstPlayer,this.verifyCheckmate()?(this.check?(this.currentPlayer=e?this.firstPlayer:this.secondPlayer,this.currentPlayer.playerLogWrapper.classList.add("winner"),this.htmlField.displayCheckmatePositions(),this.gameTitle.textContent=`\n          Important event: CheckMate! ${this.currentPlayer.name} wins the game\n          in ${this.timer.getCurrentTime()}!\n          `,this.currentPlayer.status="Win",this.currentPlayer.updateStatusTitle()):(this.mod!==s&&this.changePlayer(),this.gameTitle.textContent=`\n          Important event: Draw! ${this.currentPlayer.name} can not move!\n          `,[this.firstPlayer,this.secondPlayer].forEach((e=>{e.status="Draw",e.updateStatusTitle()}))),this.endGame()):this.changePlayer(),this.currentFigure=null}pawnPromotion(e,t){const[n,i]=[this.currentFigure.position.slice(0,1),this.currentFigure.position.slice(1)];this.currentFigure=new b(this.currentFigure.color,this.currentFigure.position),this.logicField.field[o.length-Number(i)][o.indexOf(n)]=this.currentFigure,t.remove();const r=this.currentFigure.render();e.append(r),r.style.setProperty("transform",this.htmlField.field.style.transform),this.targetImageEvent(r)}removeGameSettings(){this.settingsFront.style.transform="scale(0.3)",setTimeout((()=>{document.body.classList.remove("notScrollable"),this.settingsWrapper.remove()}),1050)}setTimer(e){const t=e.getContext("2d");return this.timer=new F(t,25,90,0),setInterval((()=>{t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height),this.timer.tick()}),1e3),this.timer}showGameSettings(){this.settingsWrapper.classList.remove("invisible"),document.body.classList.add("notScrollable"),setTimeout((()=>{this.settingsFront.style.transform="scale(1)"}),50)}signUp(e){this.mod=e;const t=d.createElement("div",["registration--wrapper"]);this.firstPlayer=new k("Player 1");const n=$.playerVisualization(this.firstPlayer);let i;switch(t.append(n),e){case s:this.secondPlayer=new E,i=$.playerVisualization(this.secondPlayer,!1);break;case a:this.secondPlayer=new k("Player 2"),i=$.playerVisualization(this.secondPlayer,!0)}i&&t.append(i);const r=d.createElement("div",["registration--submenu-wrapper"]);return this.startGameButton=d.createElement("button",["button","registration--submenu-button"],"play"),this.cancelButton=d.createElement("button",["button","registration--submenu-button"],"cancel"),r.append(this.startGameButton,this.cancelButton),n.after(r),t}startGame(e,t){this.mainWrapper=d.createElement("div",["game--main-wrapper"]),this.htmlField=new L,this.htmlField.createFieldLabels(),this.htmlField.renderFieldLabels(!0),this.mainWrapper.append(this.htmlField.wrapper),this.firstPlayer.playerLogWrapper=this.firstPlayer.renderPlayerInfo(),this.mainWrapper.prepend(this.firstPlayer.playerLogWrapper),this.secondPlayer.playerLogWrapper=this.secondPlayer.renderPlayerInfo(),this.mainWrapper.append(this.secondPlayer.playerLogWrapper),this.drawByAgreement(),this.surrenderButtonClick(),this.logicField=new x,this.currentFigure=null,this.logicField.createInitialFieldPosition(),this.htmlField.renderCurrentFieldPosition(this.logicField.field).forEach((e=>this.targetImageEvent(e))),this.createGameSettings(),document.body.append(this.settingsWrapper),this.log=[],this.showGameSettings(),this.clickField(),this.timerCanvas=e,this.gameTitle=t}surrenderButtonClick(){[this.firstPlayer,this.secondPlayer].forEach((e=>{e.surrenderButton.addEventListener("click",(()=>{e.status="Surrender",e.updateStatusTitle();const t=e===this.firstPlayer?this.secondPlayer:this.firstPlayer;t.status="Win",t.updateStatusTitle(),t.playerLogWrapper.classList.add("winner"),this.gameTitle.textContent=`\n          ${e.name} surrendered!\n          ${t.name} wins the game.\n        `,this.endGame()}))}))}targetImageEvent(e){const t=e;t.onmousedown=e=>{if(this.currentPlayer.chessmanColor!==t.dataset.color)return!1;this.currentFigure=this.logicField.getItem(t.dataset.position),this.htmlField.displayCurrentPosition(t),t.style.cursor=l;const n=this.currentFigure.canMove(),i=this.currentFigure.canBeat();let r;return this.currentFigure instanceof m&&!this.currentFigure.moved&&!this.check&&(r=this.verifyCastling()),this.logicField.checkFigureMovablePositions(n,i,this.currentPlayer.chessmanColor).forEach((e=>{const t=x.getCopy(this.logicField.field),n=new x(t),i=n.getItem(this.currentFigure.position);n.moveFigureInField(i,e),x.verifyCheck(t,this.currentPlayer.chessmanColor,!1).length||this.htmlField.field.querySelector(`[data-position=${e}]`).classList.add("movable")})),r&&r.forEach((e=>{const t=this.htmlField.field.querySelector(`[data-position=${e}]`);t.classList.add("movable"),t.classList.add("castling")})),!!e&&(this.htmlField.moveImage(t,[e.clientX,e.clientY],"black"===this.currentPlayer.chessmanColor),this.htmlField.dropImage(t),!0)}}verifyCastling(){const e=x.getCopy(this.logicField.field),t=new x(e),n=t.getItem(this.currentFigure.position),i=n.position.slice(0,1),r=n.position.slice(1),[a,s]=[t.getItem(`${o[0]}${r}`),t.getItem(`${o[o.length-1]}${r}`)],l=[];return[a,s].forEach((e=>{if(!(e instanceof y))return!1;const a=this.logicField.getItem(e.position);if(!(a instanceof y)||a.moved)return!1;const s=e.position.slice(0,1),c=s<i?-1:1,h=[];for(let e=o.indexOf(i)+c;e*c<o.indexOf(s)*c;e+=c)h.push(`${o[e]}${r}`);return!h.some((e=>t.getItem(e)))&&(!h.some((e=>{const t=x.getCopy(this.logicField.field),i=new x(t),r=i.getItem(n.position);return i.moveFigureInField(r,e),x.verifyCheck(t,this.currentPlayer.chessmanColor,!1).length}))&&(l.push(`${o[o.indexOf(i)+2*c]}${r}`),!0))})),l}verifyCheckmate(){return!this.logicField.getAllMovablePositions(this.currentPlayer.chessmanColor).length}writeLog(e,t,n){this.log.push(`${n.color}-${n.name}: ${e}-${t}`);const i=d.createElement("li",["game--log"]),r=d.createElement("div",["game--log-content-wrapper"]),a=d.createImage(`./img/chess-figures/${n.color}-${n.name}.png`,["game--log-image"]),s=d.createElement("span",["game--log-text"],`${this.timer.getCurrentTime()}`),o=d.createElement("span",["game--log-text"],`${e}-${t}`);i.append(r),r.append(a,s,o),this.currentPlayer.logWrapper.append(i)}}class N{constructor(e){this.replayRecord=e}appendLogs(e){this.logList=[];let t=0;this.replayRecord.log.forEach((n=>{t+=1;const i=t,r=d.createElement("li",["replay--log-li"]),[a,s]=n.split("+"),o=this.logicFieldPositions[this.logicFieldPositions.length-1],l=x.getCopy(o),c=new x(l);[a,s].forEach((e=>{if(!e)return!1;const[t,n]=e.split(": "),i=d.createImage(`./img/chess-figures/${t}.png`,["replay--log-image"]),a=d.createElement("p",["replay--log-text"],n);r.append(i,a);const[s,o]=n.split("-");let l=c.getItem(s);return l instanceof g&&l.isLastRow()&&(l=new b(l.color,l.position)),c.moveFigureInField(l,o),l.position=o,!0})),this.logicFieldPositions.push(l),e.append(r),r.onclick=()=>{this.clearCurrentLogPosition(),this.currentPosition=i,r.classList.add("active"),this.htmlField.renderCurrentFieldPosition(l),r===this.logList[this.logList.length-1]&&this.showEndGameTitle()},this.logList.push(r)}))}clearCurrentLogPosition(){this.logList.forEach((e=>e.classList.remove("active"))),this.endGameTitle&&(this.endGameTitle.remove(),this.winnerWrapper&&this.winnerWrapper.classList.remove("winner"))}createControlButtons(){const e=d.createElement("div",["replay--panel-wrapper"]),t=d.createElement("button",["replay--control-button","button"],""),n=d.createElement("button",["replay--control-button","button"],""),i=d.createElement("button",["replay--control-button","button"],""),r=d.createElement("button",["replay--control-button","button"],""),a=d.createElement("button",["replay--control-button","button"],"");return e.append(t,n,i,r,a),t.onclick=()=>{this.currentPosition=0,this.htmlField.renderCurrentFieldPosition(this.logicFieldPositions[0]),this.clearCurrentLogPosition()},a.onclick=()=>{this.logList[this.logList.length-1].click()},n.onclick=()=>{this.currentPosition>1?(this.currentPosition-=1,this.logList[this.currentPosition-1].click()):1===this.currentPosition&&t.click()},r.onclick=()=>{this.currentPosition<this.logList.length&&(this.currentPosition+=1,this.logList[this.currentPosition-1].click())},i.onclick=()=>{if(i.classList.toggle("clicked"),i.classList.contains("clicked")){const e=setInterval((()=>{this.currentPosition<this.logList.length&&(this.currentPosition+=1,this.logList[this.currentPosition-1].click())}),1e3);[t,n,i,r,a].forEach((t=>{t.addEventListener("click",(()=>{clearInterval(e),t!==i&&(i.classList.remove("clicked"),i.textContent="")}))}))}i.textContent=i.classList.contains("clicked")?"||":""},e}createReplayField(){return this.replayWrapper=d.createElement("div",["replay--wrapper"]),this.replayWrapper.append(this.createFieldWrapper()),this.replayWrapper.append(this.createLogWrapper()),this.replayWrapper}createFieldWrapper(){const e=d.createElement("div",["replay--player-field-wrapper"]),t=d.createElement("div",["replay--player-wrapper"]),n="black"===this.replayRecord.firstPlayer.chessmanColor,i=n?this.replayRecord.firstPlayer:this.replayRecord.secondPlayer,r=d.createElement("div",["registration--avatar-wrapper"]);r.style.setProperty("background-image",`url(${i.avatarUrl})`);const a=d.createElement("p",["main--replay-name"],i.name);t.append(r,a),e.append(t),this.htmlField=new L,this.fieldInitialPosition(),e.append(this.htmlField.wrapper);const s=d.createElement("div",["replay--player-wrapper"]),o=n?this.replayRecord.secondPlayer:this.replayRecord.firstPlayer,l=d.createElement("div",["registration--avatar-wrapper"]);l.style.setProperty("background-image",`url(${o.avatarUrl})`);const c=d.createElement("p",["main--replay-name"],o.name);s.append(l,c),e.append(s);const h="Win"===o.status,p="Win"===i.status;return h&&(this.winnerWrapper=s),p&&(this.winnerWrapper=t),e}createLogWrapper(){const e=d.createElement("div",["replay--player-field-wrapper"]),t=d.createElement("h4",["main--replay-title","main--replay-log-title"],"Log:"),n=d.createElement("div",["replay--log-wrapper"]),i=this.createControlButtons();return e.append(t,n,i),this.appendLogs(n),e}fieldInitialPosition(){this.htmlField.createFieldLabels(),this.htmlField.renderFieldLabels(!0),this.logicFieldPositions=[];const e=new x;e.createInitialFieldPosition(),this.htmlField.renderCurrentFieldPosition(e.field),this.logicFieldPositions.push(e.field),this.currentPosition=0}showEndGameTitle(){this.endGameTitle=d.createElement("h3",["main--replay-title"],this.replayRecord.title),this.replayWrapper.before(this.endGameTitle),this.winnerWrapper&&this.winnerWrapper.classList.add("winner")}showReplayInfo(){const e=d.createElement("div",["main--replay-info-wrapper"]),t=[];[this.replayRecord.firstPlayer,this.replayRecord.secondPlayer].forEach((e=>{const n=d.createElement("div",["registration--player-wrapper"]),i=d.createElement("div",["registration--avatar-wrapper"]);i.style.setProperty("background-image",`url(${e.avatarUrl})`);const r=d.createElement("p",["main--replay-name"],e.name),a=d.createElement("p",["main--replay-name"],`Set Color: ${e.chessmanColor}`),s=d.createElement("p",["main--replay-name"],e.status);n.append(i,r,a,s),t.push(n)})),e.append(t[0]);const n=d.createElement("div",["main--button-wrapper"]),i=d.createElement("h3",["main--replay-title"]);if("Draw"===this.replayRecord.firstPlayer.status)i.textContent="Draw!";else{const e="Win"===this.replayRecord.firstPlayer.status?this.replayRecord.firstPlayer.name:this.replayRecord.secondPlayer.name;i.textContent=`${e} win the game!`}const r=d.createElement("h4",["main--replay-title"],`Common Time: ${this.replayRecord.totalTime}`);return this.playRecordButton=d.createElement("button",["main--replay-button","button","main--info-button"],"View Replay"),n.append(i,r,this.playRecordButton),e.append(n),e.append(t[1]),e}}class T{constructor(){this.htmlMainPage=d.createElement("main",["main"])}cancelGameScript(){this.game.cancelButton.onclick=()=>{this.registrationWrapper.remove(),this.game=null,this.htmlMainPage.append(this.mainMenuWrapper)}}createEndGameButtons(){const e=d.createElement("div",["endgame--wrapper"]),t=d.createElement("button",["endgame--button","button"],"To main menu"),n=d.createElement("button",["endgame--button","button"],"Replay");e.append(t,n),this.game.endGameButtons=e,t.onclick=()=>{this.game.mainWrapper.remove(),this.game.endGameButtons.remove(),this.signBoardWrapper.remove(),this.game=null,this.htmlMainPage.append(this.mainMenuWrapper)},n.onclick=()=>{this.game.mainWrapper.remove(),this.game.endGameButtons.remove(),this.signBoardWrapper.remove();const e=d.createElement("button",["main--button","main--replay-button","button"],"To main menu");this.htmlMainPage.append(e),e.onclick=()=>{this.htmlMainPage.textContent="",this.htmlMainPage.append(this.mainMenuWrapper)};const t=new N(this.game.replayRecord);this.htmlMainPage.append(t.createReplayField()),this.game=null}}createMainMenu(){return this.mainMenuWrapper=d.createElement("div",["main--menu-wrapper"]),this.buttonPvE=d.createElement("button",["main--button","button"],"Play versus bot"),this.buttonPvPOnline=d.createElement("button",["main--button","button"],"Play Online"),this.buttonPvPOffline=d.createElement("button",["main--button","button"],"Play Offline"),this.buttonReplay=d.createElement("button",["main--button","main--replay-button","button"],"View Replays"),this.mainMenuWrapper.append(this.buttonPvE,this.buttonPvPOnline,this.buttonPvPOffline),this.mainMenuWrapper.append(this.buttonReplay),this.mainMenuWrapper}createSignBoard(){return this.signBoardWrapper=d.createElement("div",["main--sign-wrapper"]),this.timerCanvas=document.createElement("canvas"),this.timerCanvas.classList.add("main--sign-timer"),this.gameTitle=d.createElement("h4",["main--sign-title"]),this.signBoardWrapper.append(this.timerCanvas,this.gameTitle),this.signBoardWrapper}createReplaysMenu(e){this.mainMenuWrapper.remove();const t=d.createElement("button",["main--button","main--replay-button","button"],"To main menu");this.htmlMainPage.append(t),t.onclick=()=>{this.htmlMainPage.textContent="",this.htmlMainPage.append(this.mainMenuWrapper)},this.replaysWrapper=d.createElement("div",["main--replay-wrapper"]),this.htmlMainPage.append(this.replaysWrapper),e.forEach((e=>{const t=new N(e);this.replaysWrapper.append(t.showReplayInfo()),t.playRecordButton.onclick=()=>{this.replaysWrapper.remove(),this.htmlMainPage.append(t.createReplayField())}}))}setMenuClick(){this.buttonPvE.onclick=()=>{this.startSignUp(s)},this.buttonPvPOnline.onclick=()=>{this.startSignUp(r)},this.buttonPvPOffline.onclick=()=>{this.startSignUp(a)},this.buttonReplay.onclick=()=>{return e=this,t=void 0,i=function*(){const e=new D,t=yield e.getReplaysDB();this.createReplaysMenu(t)},new((n=void 0)||(n=Promise))((function(r,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i}}startSignUp(e){this.mainMenuWrapper.remove(),this.game=new M,this.registrationWrapper=this.game.signUp(e),this.htmlMainPage.append(this.registrationWrapper),this.cancelGameScript(),this.startGameScript()}startGameScript(){this.game.mod!==r?this.game.startGameButton.onclick=()=>{this.registrationWrapper.remove(),this.htmlMainPage.append(this.createSignBoard()),this.game.startGame(this.timerCanvas,this.gameTitle),this.htmlMainPage.append(this.game.mainWrapper),this.createEndGameButtons()}:this.game.startGameButton.onclick=()=>{}}}n(915),(new class{createHeader(){const e=d.createElement("header",["header"]),t=d.createElement("div",["header-content"]);t.classList.add("content"),e.append(t);const n=d.createElement("div",["header--logo-wrapper"]),i=d.createImage("./icons/logo.png",["logo"]),r=d.createElement("h2",["header--title"],"Chess");return n.append(i,r),t.append(n),this.header=e,e}createMainPage(){this.mainPage=new T,this.mainPage.htmlMainPage.append(this.mainPage.createMainMenu()),this.mainPage.setMenuClick()}createProject(){this.createHeader(),document.body.append(this.header),this.createMainPage(),document.body.append(this.mainPage.htmlMainPage),(new D).createDB()}}).createProject()}},i={};function r(e){var t=i[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var a=i[e]={id:e,exports:{}};try{var s={id:e,module:a,factory:n[e],require:r};r.i.forEach((function(e){e(s)})),a=s.module,s.factory.call(a.exports,a,a.exports,s.require)}catch(e){throw a.error=e,e}return a.exports}r.m=n,r.c=i,r.i=[],r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.hu=e=>e+"."+r.h()+".hot-update.js",r.hmrF=()=>"main."+r.h()+".hot-update.json",r.h=()=>"fe0e10ff1cbe2427b115",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="chess:",r.l=(n,i,a,s)=>{if(e[n])e[n].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var d=c[h];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+a),o.src=n),e[n]=[i];var p=(t,i)=>{o.onerror=o.onload=null,clearTimeout(u);var r=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(i))),t)return t(i)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t,n,i,a={},s=r.c,o=[],l=[],c="idle";function h(e){c=e;for(var t=0;t<l.length;t++)l[t].call(null,e)}function d(e){if(0===t.length)return e();var n=t;return t=[],Promise.all(n).then((function(){return d(e)}))}function p(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return h("check"),r.hmrM().then((function(i){if(!i)return h(f()?"ready":"idle"),null;h("prepare");var a=[];return t=[],n=[],Promise.all(Object.keys(r.hmrC).reduce((function(e,t){return r.hmrC[t](i.c,i.r,i.m,e,n,a),e}),[])).then((function(){return d((function(){return e?m(e):(h("ready"),a)}))}))}))}function u(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):m(e)}function m(e){e=e||{},f();var t=n.map((function(t){return t(e)}));n=void 0;var r,a=t.map((function(e){return e.error})).filter(Boolean);if(a.length>0)return h("abort"),Promise.resolve().then((function(){throw a[0]}));h("dispose"),t.forEach((function(e){e.dispose&&e.dispose()})),h("apply");var s=function(e){r||(r=e)},o=[];return t.forEach((function(e){if(e.apply){var t=e.apply(s);if(t)for(var n=0;n<t.length;n++)o.push(t[n])}})),r?(h("fail"),Promise.resolve().then((function(){throw r}))):i?m(e).then((function(e){return o.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):(h("idle"),Promise.resolve(o))}function f(){if(i)return n||(n=[]),Object.keys(r.hmrI).forEach((function(e){i.forEach((function(t){r.hmrI[e](t,n)}))})),i=void 0,!0}r.hmrD=a,r.i.push((function(m){var f,g,b,y,v=m.module,w=function(n,i){var r=s[i];if(!r)return n;var a=function(t){if(r.hot.active){if(s[t]){var a=s[t].parents;-1===a.indexOf(i)&&a.push(i)}else o=[i],e=t;-1===r.children.indexOf(t)&&r.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+i),o=[];return n(t)},l=function(e){return{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}}};for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&"e"!==p&&Object.defineProperty(a,p,l(p));return a.e=function(e){return function(e){switch(c){case"ready":return h("prepare"),t.push(e),d((function(){h("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(n.e(e))},a}(m.require,m.id);v.hot=(f=m.id,g=v,y={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:b=e!==f,_requireSelf:function(){o=g.parents.slice(),e=b?void 0:f,r(f)},active:!0,accept:function(e,t,n){if(void 0===e)y._selfAccepted=!0;else if("function"==typeof e)y._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var i=0;i<e.length;i++)y._acceptedDependencies[e[i]]=t||function(){},y._acceptedErrorHandlers[e[i]]=n;else y._acceptedDependencies[e]=t||function(){},y._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)y._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)y._declinedDependencies[e[t]]=!0;else y._declinedDependencies[e]=!0},dispose:function(e){y._disposeHandlers.push(e)},addDisposeHandler:function(e){y._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=y._disposeHandlers.indexOf(e);t>=0&&y._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":n=[],Object.keys(r.hmrI).forEach((function(e){r.hmrI[e](f,n)})),h("ready");break;case"ready":Object.keys(r.hmrI).forEach((function(e){r.hmrI[e](f,n)}));break;case"prepare":case"check":case"dispose":case"apply":(i=i||[]).push(f)}},check:p,apply:u,status:function(e){if(!e)return c;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var t=l.indexOf(e);t>=0&&l.splice(t,1)},data:a[f]},e=void 0,y),v.parents=o,v.children=[],o=[],m.require=w})),r.hmrC={},r.hmrI={}})(),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e,t,n,i,a={179:0},s={};function o(e){return new Promise(((t,n)=>{s[e]=t;var i=r.p+r.hu(e),a=new Error;r.l(i,(t=>{if(s[e]){s[e]=void 0;var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;a.message="Loading hot update chunk "+e+" failed.\n("+i+": "+r+")",a.name="ChunkLoadError",a.type=i,a.request=r,n(a)}}))}))}function l(s){function o(e){for(var t=[e],n={},i=t.map((function(e){return{chain:[e],id:e}}));i.length>0;){var a=i.pop(),s=a.id,o=a.chain,c=r.c[s];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:s};if(c.hot._main)return{type:"unaccepted",chain:o,moduleId:s};for(var h=0;h<c.parents.length;h++){var d=c.parents[h],p=r.c[d];if(p){if(p.hot._declinedDependencies[s])return{type:"declined",chain:o.concat([d]),moduleId:s,parentId:d};-1===t.indexOf(d)&&(p.hot._acceptedDependencies[s]?(n[d]||(n[d]=[]),l(n[d],[s])):(delete n[d],t.push(d),i.push({chain:o.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];-1===e.indexOf(i)&&e.push(i)}}r.f&&delete r.f.jsonpHmr,e=void 0;var c={},h=[],d={},p=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var u in t)if(r.o(t,u)){var m,f=t[u],g=!1,b=!1,y=!1,v="";switch((m=f?o(u):{type:"disposed",moduleId:u}).chain&&(v="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":s.onDeclined&&s.onDeclined(m),s.ignoreDeclined||(g=new Error("Aborted because of self decline: "+m.moduleId+v));break;case"declined":s.onDeclined&&s.onDeclined(m),s.ignoreDeclined||(g=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+v));break;case"unaccepted":s.onUnaccepted&&s.onUnaccepted(m),s.ignoreUnaccepted||(g=new Error("Aborted because "+u+" is not accepted"+v));break;case"accepted":s.onAccepted&&s.onAccepted(m),b=!0;break;case"disposed":s.onDisposed&&s.onDisposed(m),y=!0;break;default:throw new Error("Unexception type "+m.type)}if(g)return{error:g};if(b)for(u in d[u]=f,l(h,m.outdatedModules),m.outdatedDependencies)r.o(m.outdatedDependencies,u)&&(c[u]||(c[u]=[]),l(c[u],m.outdatedDependencies[u]));y&&(l(h,[m.moduleId]),d[u]=p)}t=void 0;for(var w,x=[],k=0;k<h.length;k++){var P=h[k],E=r.c[P];E&&(E.hot._selfAccepted||E.hot._main)&&d[P]!==p&&!E.hot._selfInvalidated&&x.push({module:P,require:E.hot._requireSelf,errorHandler:E.hot._selfAccepted})}return{dispose:function(){var e;n.forEach((function(e){delete a[e]})),n=void 0;for(var t,i=h.slice();i.length>0;){var s=i.pop(),o=r.c[s];if(o){var l={},d=o.hot._disposeHandlers;for(k=0;k<d.length;k++)d[k].call(null,l);for(r.hmrD[s]=l,o.hot.active=!1,delete r.c[s],delete c[s],k=0;k<o.children.length;k++){var p=r.c[o.children[k]];p&&(e=p.parents.indexOf(s))>=0&&p.parents.splice(e,1)}}}for(var u in c)if(r.o(c,u)&&(o=r.c[u]))for(w=c[u],k=0;k<w.length;k++)t=w[k],(e=o.children.indexOf(t))>=0&&o.children.splice(e,1)},apply:function(e){for(var t in d)r.o(d,t)&&(r.m[t]=d[t]);for(var n=0;n<i.length;n++)i[n](r);for(var a in c)if(r.o(c,a)){var o=r.c[a];if(o){w=c[a];for(var l=[],p=[],u=[],m=0;m<w.length;m++){var f=w[m],g=o.hot._acceptedDependencies[f],b=o.hot._acceptedErrorHandlers[f];if(g){if(-1!==l.indexOf(g))continue;l.push(g),p.push(b),u.push(f)}}for(var y=0;y<l.length;y++)try{l[y].call(null,w)}catch(t){if("function"==typeof p[y])try{p[y](t,{moduleId:a,dependencyId:u[y]})}catch(n){s.onErrored&&s.onErrored({type:"accept-error-handler-errored",moduleId:a,dependencyId:u[y],error:n,originalError:t}),s.ignoreErrored||(e(n),e(t))}else s.onErrored&&s.onErrored({type:"accept-errored",moduleId:a,dependencyId:u[y],error:t}),s.ignoreErrored||e(t)}}}for(var v=0;v<x.length;v++){var k=x[v],P=k.module;try{k.require(P)}catch(t){if("function"==typeof k.errorHandler)try{k.errorHandler(t,{moduleId:P,module:r.c[P]})}catch(n){s.onErrored&&s.onErrored({type:"self-accept-error-handler-errored",moduleId:P,error:n,originalError:t}),s.ignoreErrored||(e(n),e(t))}else s.onErrored&&s.onErrored({type:"self-accept-errored",moduleId:P,error:t}),s.ignoreErrored||e(t)}}return h}}}self.webpackHotUpdatechess=(e,n,a)=>{for(var o in n)r.o(n,o)&&(t[o]=n[o]);a&&i.push(a),s[e]&&(s[e](),s[e]=void 0)},r.hmrI.jsonp=function(e,a){t||(t={},i=[],n=[],a.push(l)),r.o(t,e)||(t[e]=r.m[e])},r.hmrC.jsonp=function(s,c,h,d,p,u){p.push(l),e={},n=c,t=h.reduce((function(e,t){return e[t]=!1,e}),{}),i=[],s.forEach((function(t){r.o(a,t)&&void 0!==a[t]&&(d.push(o(t)),e[t]=!0)})),r.f&&(r.f.jsonpHmr=function(t,n){e&&!r.o(e,t)&&r.o(a,t)&&void 0!==a[t]&&(n.push(o(t)),e[t]=!0)})},r.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(r.p+r.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),r(397)})();